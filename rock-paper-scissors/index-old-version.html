<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Rock Paper Scissors</title>
</head>

<body>
  <script>
        // Row i is the player move. Column j is the computer move. 
        // Index 0 is Rock, 1 is Paper, 2 is Scissors.
        // Ex. winner[0][1] = CPU_WIN : Player plays Rock. Computer plays Paper. Computer wins.
        const TIE = 0;
        const PLAYER_WIN = 1;
        const CPU_WIN = 2;
        const WINNER = [
            [TIE, CPU_WIN, PLAYER_WIN],
            [PLAYER_WIN, TIE, CPU_WIN],
            [CPU_WIN, PLAYER_WIN, TIE]
            ];
        function computerPlay() {
            return Math.floor(Math.random() * (3 - 0) + 0);
        }
        function getUserInput() {
            let selection = prompt("Play a move:").toLowerCase();
            if (selection == "rock"){
                return 0;
            }
            else if (selection == "paper"){
                return 1;
            }
            else if (selection == "scissors"){
                return 2;
            }
            if (selection !== "rock" || selection !== "paper" || selection !== "scissors"){
                alert("Not a valid move. Move must be either Rock, Paper, or Scissors.");
                return getUserInput();
            }
        }
        function playRound(playerSelection,computerSelection) {
            return WINNER[playerSelection][computerSelection];
        }
        function game(numRounds){
            let playerSelection;
            let computerSelection;
            let numRoundsPlayerWon = 0;
            for (let i = 0; i < numRounds; i++){
                playerSelection = getUserInput();
                computerSelection = computerPlay();
                roundScore = playRound(playerSelection,computerSelection);
                if (roundScore === 1){
                    numRoundsPlayerWon++;
                }
                else if (roundScore === 2){
                    numRoundsPlayerWon--;
                }
            }
            if (numRoundsPlayerWon > 0){
                return `You won the Best of ${numRounds}!`;
            }
            else if (numRoundsPlayerWon === 0){
                return "Tie!";
            }
            else{
                return `You lost the Best of ${numRounds}!`;
            }
        }
        console.log(game(5));
  </script>
</body>
</html>